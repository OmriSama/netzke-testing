<!DOCTYPE html>
<html>
<head>
  <title>Netzke Testing</title>
  <%= csrf_meta_tag %>
  <%= load_netzke %>

  <% if params[:spec] %>
    <%= javascript_include_tag "/assets/javascripts/expect/expect.js" %>
    <%= javascript_include_tag "/assets/javascripts/mocha/mocha.js" %>
    <%= stylesheet_link_tag "/assets/stylesheets/mocha/mocha.css" %>
    <script>
      mocha.setup('bdd');
      mocha.setup({ignoreLeaks: true, slow: 500});
      Ext.onReady(function(){
        Netzke.mochaRunner = mocha.run(function(){Netzke.mochaDone = true;});
      });
    </script>
    <% if params["no-helpers"].nil? %>
      <%= javascript_include_tag "/assets/netzke/testing/helpers/actions" %>
      <%= javascript_include_tag "/assets/netzke/testing/helpers/queries" %>
      <%= javascript_include_tag "/assets/netzke/testing/helpers/expectations" %>
      <%= javascript_include_tag "/assets/netzke/testing/helpers/grid" %>
      <%= javascript_include_tag "/assets/netzke/testing/helpers/form" %>
    <% end %>
    <%= javascript_include_tag "/netzke/specs/#{params[:spec]}" %>
  <% end %>

</head>
<body>

<%= yield %>
<div id="mocha"></div>
</body>
</html>
